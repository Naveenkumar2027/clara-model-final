{
  "timestamp": "2025-11-07T14:36:52.473373",
  "total_tests": 15,
  "passed": 15,
  "failed": 0,
  "errors": 0,
  "timeouts": 0,
  "skipped": 0,
  "total_duration": 323.09621000289917,
  "results": [
    {
      "test": "TC020_socketio_call_notifications_test.py",
      "status": "passed",
      "error": null,
      "duration": 17.283241987228394,
      "stdout": "[Test] Step 1: Logging in as staff...\n[Test] Staff logged in, staffId: nagashreen\n[Test] Step 2: Connecting staff to Socket.IO...\n[SocketIO] Connected to /rtc\n[Test] Staff Socket.IO connected\n[Test] Joining staff room for staffId: nagashreen\n[Test] Staff joined room\n[Test] Step 3: Logging in as client...\n[Test] Client logged in\n[Test] Step 3.5: Setting staff availability...\n[Test] Staff availability set to available\n[Test] Step 4: Initiating call from client with client name...\n[Test] Call initiated, callId: 86e8527a-dfc1-4284-8217-eca6d642e801\n[Test] Step 5: Waiting for call.initiated event...\n[Test] [PASS] Received call.initiated event: {'callId': '86e8527a-dfc1-4284-8217-eca6d642e801', 'client': {'id': 'test-client-123', 'name': 'Test User from Prechat', 'avatar': 'https://ui-avatars.com/api/?name=Test%20User%20from%20Prechat&background=6366f1&color=fff'}, 'createdAt': 1762506104460}\n[Test] Step 6: Validating event data structure...\n[Test] [PASS] Client name verified: Test User from Prechat\n[Test] [PASS] Event data structure validated\n[Test] [PASS] TC020 PASSED: Staff receives call.initiated event correctly\n[SocketIO] Disconnected from /rtc\n",
      "stderr": ""
    },
    {
      "test": "TC021_socketio_call_acceptance_test.py",
      "status": "passed",
      "error": null,
      "duration": 24.588948965072632,
      "stdout": "[Test] Step 1: Logging in as staff...\n[Test] Staff logged in and set to available, staffId: nagashreen\n[Test] Step 2: Connecting staff to Socket.IO...\n[SocketIO] Connected to /rtc\n[Test] Staff Socket.IO connected and joined room\n[Test] Step 3: Logging in as client...\n[SocketIO] Connected to /rtc\n[Test] Client logged in and Socket.IO connected\n[Test] Step 4: Initiating call from client...\n[Test] Call initiated, callId: 6a906d30-4c33-480f-bfd5-c661d18a3e90\n[Test] Step 5: Waiting for call.initiated event on staff...\n[Test] Staff received call.initiated event\n[Test] Step 6: Joining call rooms...\n[Test] Step 7: Accepting call from staff...\n[Test] Call accepted via API\n[Test] Step 8: Waiting for call.accepted event on client...\n[Test] [PASS] Received call.accepted event: {'callId': '6a906d30-4c33-480f-bfd5-c661d18a3e90', 'staff': {'id': 'nagashreen', 'name': 'nagashreen@gmail.com'}}\n[Test] Step 9: Validating call.accepted event data...\n[Test] [PASS] Event data validated\n[Test] Step 10: Checking for call:update event...\n[Test] [PASS] Received call:update event with accepted state\n[Test] [PASS] TC021 PASSED: Call acceptance events work correctly\n[SocketIO] Disconnected from /rtc\n[SocketIO] Disconnected from /rtc\n",
      "stderr": ""
    },
    {
      "test": "TC022_socketio_call_decline_test.py",
      "status": "passed",
      "error": null,
      "duration": 29.2973575592041,
      "stdout": "[Test] Step 1: Logging in as staff...\n[Test] Staff logged in and set to available, staffId: nagashreen\n[Test] Step 2: Connecting staff to Socket.IO...\n[SocketIO] Connected to /rtc\n[Test] Staff Socket.IO connected and joined room\n[Test] Step 3: Logging in as client...\n[SocketIO] Connected to /rtc\n[Test] Client logged in and Socket.IO connected\n[Test] Step 4: Initiating call from client...\n[Test] Call initiated, callId: 48cf564c-6c95-4260-a007-f61049e32e6b\n[Test] Step 5: Waiting for call.initiated event on staff...\n[Test] Staff received call.initiated event\n[Test] Step 6: Joining call room...\n[Test] Step 7: Declining call from staff...\n[Test] Call declined via API\n[Test] Step 8: Waiting for call.declined event on client...\n[Test] [PASS] Received call.declined event: {'callId': '48cf564c-6c95-4260-a007-f61049e32e6b', 'reason': 'Test decline reason'}\n[Test] Step 9: Validating call.declined event data...\n[Test] [PASS] Event data validated\n[Test] Step 10: Checking for call:update event...\n[Test] [PASS] TC022 PASSED: Call decline events work correctly\n[SocketIO] Disconnected from /rtc\n[SocketIO] Disconnected from /rtc\n",
      "stderr": ""
    },
    {
      "test": "TC023_socketio_call_lifecycle_test.py",
      "status": "passed",
      "error": null,
      "duration": 26.52238130569458,
      "stdout": "[Test] Step 1: Setting up staff...\n[SocketIO] Connected to /rtc\n[Test] Staff ready, staffId: nagashreen\n[Test] Step 2: Setting up client...\n[SocketIO] Connected to /rtc\n[Test] Client ready\n[Test] Step 3: Initiating call...\n[Test] Call initiated, callId: 2de8de30-50fd-4d03-82d9-e30029563c7b\n[Test] Step 4: Verifying call.initiated event...\n[Test] [PASS] call.initiated event received\n[Test] Step 5: Joining call rooms...\n[Test] Step 6: Accepting call...\n[Test] Step 7: Verifying call.accepted event...\n[Test] [PASS] call.accepted event received\n[Test] Step 8: Verifying call:update events...\n[Test] [PASS] call:update (accepted) received on staff socket\n[Test] Step 9: Ending call...\n[Test] Step 10: Verifying call end events...\n[Test] [PASS] call:update (ended) event received\n[Test] [PASS] TC023 PASSED: Complete call lifecycle works via Socket.IO\n[SocketIO] Disconnected from /rtc\n[SocketIO] Disconnected from /rtc\n",
      "stderr": ""
    },
    {
      "test": "TC024_socketio_webrtc_sdp_exchange_test.py",
      "status": "passed",
      "error": null,
      "duration": 25.374411821365356,
      "stdout": "[Test] Step 1: Setting up staff...\n[SocketIO] Connected to /rtc\n[Test] Staff ready, staffId: nagashreen\n[Test] Step 2: Setting up client...\n[SocketIO] Connected to /rtc\n[Test] Client ready\n[Test] Step 3: Initiating call...\n[Test] Call initiated, callId: b699f9ca-7732-4e3b-9e01-cba6455313de\n[Test] Step 4: Waiting for call.initiated and joining call rooms...\n[Test] Both parties joined call room\n[Test] Step 5: Accepting call...\n[Test] Step 6: Setting up SDP offer listener on staff socket...\n[Test] Step 7: Client sending SDP offer...\n[Test] SDP offer sent from client\n[Test] Step 8: Waiting for staff to receive SDP offer...\n[Test] [PASS] Staff received SDP offer correctly\n[Test] Step 9: Setting up SDP answer listener on client socket...\n[Test] Step 10: Staff sending SDP answer...\n[Test] SDP answer sent from staff\n[Test] Step 11: Waiting for client to receive SDP answer...\n[Test] [PASS] Client received SDP answer correctly\n[Test] [PASS] TC024 PASSED: SDP offer/answer exchange works via Socket.IO\n[SocketIO] Disconnected from /rtc\n[SocketIO] Disconnected from /rtc\n",
      "stderr": ""
    },
    {
      "test": "TC025_socketio_webrtc_ice_candidates_test.py",
      "status": "passed",
      "error": null,
      "duration": 25.44755244255066,
      "stdout": "[Test] Step 1: Setting up staff...\n[SocketIO] Connected to /rtc\n[Test] Staff ready, staffId: nagashreen\n[Test] Step 2: Setting up client...\n[SocketIO] Connected to /rtc\n[Test] Client ready\n[Test] Step 3: Initiating and accepting call...\n[Test] Call accepted, callId: ea89d9ef-c323-4518-8336-f0fa95614b30\n[Test] Step 4: Setting up ICE candidate listener on staff socket...\n[Test] Step 5: Client sending ICE candidate...\n[Test] ICE candidate sent from client\n[Test] Step 6: Waiting for staff to receive ICE candidate...\n[Test] [PASS] Staff received ICE candidate correctly\n[Test] Step 7: Setting up ICE candidate listener on client socket...\n[Test] Step 8: Staff sending ICE candidate...\n[Test] ICE candidate sent from staff\n[Test] Step 9: Waiting for client to receive ICE candidate...\n[Test] Received candidate2: {'candidate': 'candidate:2 1 UDP 2130706431 192.168.1.2 54322 typ host', 'sdpMLineIndex': 0, 'sdpMid': '0'}, Expected: {'candidate': 'candidate:2 1 UDP 2130706431 192.168.1.2 54322 typ host', 'sdpMLineIndex': 0, 'sdpMid': '0'}\n[Test] [PASS] Client received ICE candidate correctly\n[Test] [PASS] TC025 PASSED: ICE candidate exchange works via Socket.IO\n[SocketIO] Disconnected from /rtc\n[SocketIO] Disconnected from /rtc\n",
      "stderr": ""
    },
    {
      "test": "TC026_socketio_webrtc_full_signaling_test.py",
      "status": "passed",
      "error": null,
      "duration": 26.621748208999634,
      "stdout": "[Test] Step 1: Setting up staff...\n[SocketIO] Connected to /rtc\n[SocketIO] Disconnected from /rtc\n[Test] Staff ready, staffId: nagashreen\n[Test] Step 2: Setting up client...\n[SocketIO] Connected to /rtc\n[SocketIO] Connected to /rtc\n[Test] Client ready\n[Test] Step 3: Initiating and accepting call...\n[Test] Call accepted, callId: e59a9f9b-dbd1-4955-b821-73ba678fa0ba\n[Test] Step 4: Setting up SDP offer listener on staff socket...\n[Test] Step 5: Client sending SDP offer...\n[Test] Step 6: Staff processing SDP offer and sending answer...\n[Test] Setting up SDP answer listener on client socket...\n[Test] [PASS] SDP exchange completed\n[Test] Step 8: Exchanging ICE candidates...\n[Test] [PASS] ICE candidate exchange completed\n[Test] Step 8: Verifying event sequencing...\n[Test] Staff received 1 events\n[Test] Client received 0 events\n[Test] [PASS] TC026 PASSED: Complete WebRTC signaling flow works via Socket.IO\n[SocketIO] Disconnected from /rtc\n[SocketIO] Disconnected from /rtc\n",
      "stderr": ""
    },
    {
      "test": "TC027_timetable_get_test.py",
      "status": "passed",
      "error": null,
      "duration": 6.624118804931641,
      "stdout": "[Test] Step 1: Logging in as staff...\n[Test] Staff logged in, facultyId: nagashreen\n[Test] Step 2: Getting timetable...\n[Test] [WARN]  Timetable not found (404) - this is acceptable if timetable hasn't been created yet\n[Test] Step 3: Testing non-existent timetable...\n[Test] [PASS] Non-existent timetable correctly returns 404\n[Test] [PASS] TC027 PASSED: Timetable GET endpoint works correctly\n",
      "stderr": ""
    },
    {
      "test": "TC028_timetable_update_test.py",
      "status": "passed",
      "error": null,
      "duration": 7.131931781768799,
      "stdout": "[Test] Step 1: Logging in as staff...\n[Test] Staff logged in, facultyId: nagashreen\n[Test] Step 2: Updating timetable...\n[Test] [PASS] Timetable updated successfully\n[Test] Step 3: Verifying update by getting timetable...\n[Test] [PASS] Timetable update verified\n[Test] [PASS] TC028 PASSED: Timetable update works correctly\n",
      "stderr": ""
    },
    {
      "test": "TC029_timetable_socketio_update_test.py",
      "status": "passed",
      "error": null,
      "duration": 10.497563123703003,
      "stdout": "[Test] Step 1: Setting up staff and Socket.IO...\n[SocketIO] Connected to /rtc\n[Test] Staff ready, facultyId: nagashreen\n[Test] Step 2: Setting up timetable:updated listener...\n[Test] Step 3: Updating timetable...\n[Test] Step 4: Waiting for timetable:updated event...\n[Test] [PASS] Received timetable:updated event: {'facultyId': 'nagashreen', 'semester': '5th Semester', 'timetable': {'facultyId': 'nagashreen', 'faculty': 'Dr. Nagashree N', 'designation': 'Professor', 'semester': '5th Semester', 'schedule': {'Monday': [{'time': '09:00-10:00', 'subject': 'Updated Subject', 'room': 'Room 201'}], 'Tuesday': [], 'Wednesday': [], 'Thursday': [], 'Friday': [], 'Saturday': []}, 'workload': {'theory': 0, 'lab': 0, 'totalUnits': 0}, 'updatedAt': '2025-11-07T09:04:57.684Z', 'editHistory': [{'editedBy': 'nagashreen@gmail.com', 'date': '2025-11-07T09:04:57.684Z', 'fieldChanged': 'Updated timetable for 5th Semester'}]}}\n[Test] Step 5: Validating event data structure...\n[Test] [PASS] Event data structure validated\n[Test] [PASS] TC029 PASSED: Timetable Socket.IO update event works correctly\n[SocketIO] Disconnected from /rtc\n",
      "stderr": ""
    },
    {
      "test": "TC030_timetable_permissions_test.py",
      "status": "passed",
      "error": null,
      "duration": 6.632881164550781,
      "stdout": "[Test] Step 1: Logging in as staff...\n[Test] Staff logged in, own facultyId: nagashreen\n[Test] Step 2: Testing update of own timetable...\n[Test] [PASS] Own timetable update succeeded (as expected)\n[Test] Step 3: Testing update of other staff's timetable...\n[Test] [WARN]  Other staff's timetable update succeeded (unexpected - may be a bug)\n[Test] [PASS] TC030 PASSED: Timetable permissions test completed\n",
      "stderr": ""
    },
    {
      "test": "TC031_complete_call_workflow_test.py",
      "status": "passed",
      "error": null,
      "duration": 26.869510412216187,
      "stdout": "[Test] Step 1: Staff login...\n[Test] Staff logged in, staffId: nagashreen\n[Test] Step 2: Setting staff availability...\n[Test] Staff set to available\n[Test] Step 3: Staff connecting to Socket.IO...\n[SocketIO] Connected to /rtc\n[Test] Staff Socket.IO connected\n[Test] Step 4: Client login...\n[Test] Client logged in\n[Test] Step 5: Client connecting to Socket.IO...\n[SocketIO] Connected to /rtc\n[Test] Client Socket.IO connected\n[Test] Step 6: Client initiating call...\n[Test] Call initiated, callId: 8f32e764-02f1-4049-8873-182184920c97\n[Test] Step 7: Waiting for staff to receive call.initiated...\n[Test] [PASS] Staff received call.initiated\n[Test] Step 8: Joining call rooms...\n[Test] Step 9: Staff accepting call...\n[Test] Call accepted\n[Test] Step 10: Waiting for client to receive call.accepted...\n[Test] [PASS] Client received call.accepted\n[Test] Step 11: Starting WebRTC signaling (SDP offer)...\n[Test] [PASS] SDP offer received by staff\n[Test] Step 12: Staff sending SDP answer...\n[Test] [PASS] SDP answer received by client\n[Test] Step 13: Exchanging ICE candidates...\n[Test] [PASS] ICE candidate exchange completed\n[Test] Step 14: Ending call...\n[Test] Call ended\n[Test] Step 15: Verifying call end events...\n[Test] [PASS] Call end event received\n[Test] [PASS] TC031 PASSED: Complete call workflow works end-to-end\n[SocketIO] Disconnected from /rtc\n[SocketIO] Disconnected from /rtc\n",
      "stderr": ""
    },
    {
      "test": "TC032_staff_availability_call_routing_test.py",
      "status": "passed",
      "error": null,
      "duration": 30.377570867538452,
      "stdout": "[Test] Step 1: Staff login...\n[Test] Staff logged in, staffId: nagashreen\n[Test] Step 2: Setting staff to offline...\n[Test] [PASS] Offline staff not in available list\n[Test] Step 3: Attempting to initiate call to offline staff...\n[Test] [PASS] Call initiation correctly rejected (503) for offline staff\n[Test] Step 4: Setting staff to available...\n[Test] [PASS] Available staff in available list\n[Test] Step 5: Staff connecting to Socket.IO...\n[SocketIO] Connected to /rtc\n[Test] Step 6: Initiating call to available staff...\n[Test] Call initiated, callId: c9ebac9b-3664-458f-ae4d-f304ab75cff8\n[Test] Step 7: Waiting for staff to receive call.initiated...\n[Test] [PASS] Available staff received call.initiated\n[Test] Step 8: Setting staff to busy...\n[Test] Staff in available list after busy: False\n[Test] [PASS] TC032 PASSED: Staff availability affects call routing\n[SocketIO] Disconnected from /rtc\n",
      "stderr": ""
    },
    {
      "test": "TC033_notification_system_test.py",
      "status": "passed",
      "error": null,
      "duration": 28.36891746520996,
      "stdout": "[Test] Step 1: Setting up staff...\n[SocketIO] Connected to /rtc\n[Test] Staff ready, staffId: nagashreen\n[Test] Step 2: Client initiating call...\n[Test] Call initiated, callId: 788ac9c2-0ac1-4108-9855-01b9650ec4e4\n[Test] Step 3: Waiting for call notification...\n[Test] [PASS] Call notification received\n[Test] Step 4: Checking for notification events...\n[Test] [WARN]  No additional notification events (may be expected)\n[Test] Step 5: Accepting call and checking for update notifications...\n[Test] [WARN]  No update notification events (may be expected)\n[Test] [PASS] TC033 PASSED: Notification system works via Socket.IO\n[SocketIO] Disconnected from /rtc\n",
      "stderr": ""
    },
    {
      "test": "TC034_call_notification_with_name_test.py",
      "status": "passed",
      "error": null,
      "duration": 16.44331407546997,
      "stdout": "[Test] Step 1: Logging in as staff...\n[Test] Staff logged in, staffId: nagashreen\n[Test] Step 2: Connecting staff to Socket.IO...\n[SocketIO] Connected to /rtc\n[Test] Staff Socket.IO connected\n[Test] Joining staff room for staffId: nagashreen\n[Test] Staff joined room\n[Test] Step 3: Logging in as client...\n[Test] Client logged in\n[Test] Step 3.5: Setting staff availability...\n[Test] Staff availability set to available\n[Test] Step 4: Initiating call with client name...\n[Test] Call initiated with clientName: Test User Name, callId: 43bf555b-6050-4be4-a67d-4ddb0e737cf9\n[Test] Step 5: Waiting for call.initiated event...\n[Test] [PASS] Received call.initiated event: {'callId': '43bf555b-6050-4be4-a67d-4ddb0e737cf9', 'client': {'id': 'test-client-123', 'name': 'Test User Name', 'avatar': 'https://ui-avatars.com/api/?name=Test%20User%20Name&background=6366f1&color=fff'}, 'reason': 'Test call with name', 'createdAt': 1762506409341}\n[Test] Step 6: Validating client name in event...\n[Test] [PASS] Client name validated: Test User Name\n[Test] [PASS] TC034 PASSED: Client name is correctly sent and received in call notification\n[SocketIO] Disconnected from /rtc\n",
      "stderr": ""
    }
  ]
}